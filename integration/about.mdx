---
title: Интеграция с GuestMe
description: Пошаговое руководство по подключению к внешнему API GuestMe
openapi: "openapi/guestme-openapi.json"
---

import { Highlight } from "@mintlify/components"

GuestMe B2B API позволяет внешним партнёрам подключаться к системе GuestMe, получать данные о ресторанах, создавать бронирования и подписываться на события через вебхуки.

### 1. Получение доступа

Запросите `client_id` и `client_secret` и `адрес сервера` у менеджера GuestMe или через поддержку.

### 2. Получение access_token

Используйте `client_credentials` grant через `/oauth2/token`:

**Параметры:**

- `grant_type`: `client_credentials`
- `scope`: `ROLE_EXTERNAL_INTEGRATION`
- заголовок: `Authorization: Basic base64(client_id:client_secret)`

**Пример запроса:**
```
POST /oauth2/token
Content-Type: application/x-www-form-urlencoded
Authorization: Basic Z3Vlc3RtZTpzZWNyZXQ=

grant_type=client_credentials&scope=ROLE_EXTERNAL_INTEGRATION
```

### 3. Подключение вебхуков

Создайте вебхук через [`POST /api/v1/external/webhook`](#post-/api/v1/external/webhook), чтобы получать уведомления о событиях:

- События: `CREATE`, `UPDATE`, `DELETE`
- Сущности: `BOOKING`, `RESTAURANT`

При регистрации вебхука вы должны указать:

- `url`: адрес вашей системы, куда GuestMe будет отправлять события.

И опционально вы можете указать токен:
- `token`: ваш собственный токен, который будет добавлен в заголовок `Authorization` каждого запроса вида:
  ```
  Authorization: Bearer <ваш_токен>
  ```

Тело события приходит как `WebhookEventExternalDto`, в поле `data` - один из вариантов: `BookingExternalDto` или `RestaurantExternalDto`.

### 4. Проверка подключения ресторана

Чтобы определить, подключён ли ресторан к системе бронирования, проверьте поле:

```json
{
  "guestAcquisitionChannelEnabled": true
}
```

Это поле возвращается в объекте `RestaurantPropertiesExternalDto` в поле ресторана `RestaurantExternalDto.properties`. Если оно `true`, ресторан готов к приёму онлайн-бронирований.

### Контакты

По вопросам интеграции - обращайтесь в поддержку: `api@guestme.ru`
